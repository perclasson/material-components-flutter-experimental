# Rope
This demo was inspired by the mesmerizing rainbow rope display seen in [this video](https://vimeo.com/116904791). A colorful rope traces an undulating hand-drawn "Google" script across the screen. Touch a button, and the rope forms a loop around your finger. Let go, and it morphs back into the logo. 

![preview](https://anypixel-storage.appspot.com/docs/preview-rope.jpg)

**Code:** Jeremy Abel
<br />
**Typography:** Andrew Herzog


## How Does It Work?
### Button inputs
It would get pretty chaotic if each button-press generated a new loop in the rope. Imagine pressing 6 buttons at once with your palm and suddenly there would be 6 loops. To solve this problem, the button inputs are grouped into "blobs" by proximity. Each blob generates a new loop in the path.

### Generating the path
Each button input blob is given a loop in the path, which is represented by a circle that encloses every point in the blob. Remember those trigonometry lessons from school? Using some math, each circle can be transformed into a single looping path:

![tangent two circles loop](https://anypixel-storage.appspot.com/docs/tangentcircle.gif)

This generated path is then smoothed using [b-spline](https://en.wikipedia.org/wiki/B-spline) interpolation. The interpolated path contains the same number of points no matter what the curve shape is, which gives a smooth and constant speed to both the wavy motion of the path, and the colored gradient running along the path.

### Rendering
There are actually two paths: one for the logo, and one for the interactive loops. The logo is a simple SVG bezier path, and the interactive loop path is generated dynamically, based on the position and size of each button blob. A final path is generated by morphing between the logo and loop paths. The spline path is rendered as 3D geometry using [threejs](threejs.org). Using 3D allows the rope to be directly textured with a colorful gradient, due 


## Stuff To Try

### Change the logo path
In **logo-path.js**, you can replace the ```svgPath``` variable with your own curve data from an svg. If you're having trouble viewing your curve, you can adjust the camera position in **scene.js**.

### Peek behind the scenes
In **app.js**, uncomment ```debugGrapher.enable()``` to see a visual representation of the data which generates the final path. The left canvas will display the pre-smoothing path generated in **spiral-path-generator.js**, and the right canvas will show the change of various values in **logo-path.js** over the length of the path. You can also uncomment 
```require('./debug-events')``` in **app.js** to add a few simulated button events to the display, which will allow you to see what happens when multiple rope loops interact.


## More Info

- [NURBS Demo](http://geometrie.foretnik.net/files/NURBS-en.swf) - A great NURBS interactive visualization 
- [Circle-Circle Tangents](http://www.cut-the-knot.org/Curriculum/Geometry/GeoGebra/TangentToTwoCircles.shtml) - Interactive visualization of circle-circle tangents
- [Smallest Enclosing Circle](http://bl.ocks.org/mbostock/29c534ff0b270054a01c) - Interactive visualization of the smallest enclosing circle problem
- [How To Use Knot Vectors](http://www.saccade.com/writing/graphics/KnotVectors.pdf) - A technical paper on NURBS knot vectors, from Apple circa 1990(!)


## Shoutouts

In addition to the resources mentioned above, I'd like to thank [Thibaut SÃ©guy](https://github.com/thibauts) for his [b-spline](https://github.com/thibauts/b-spline) library, [Juame Sanchez](http://www.clicktorelease.com) for his [ConstantSpline](https://github.com/spite/THREE.ConstantSpline) and [MeshLine](https://github.com/spite/THREE.MeshLine) libraries, [Rod Stephens](http://www.csharphelper.com/) for his [smallest enclosing circle](http://csharphelper.com/blog/2014/08/find-a-minimal-bounding-circle-of-a-set-of-points-in-c/) code, and the folks in [#math](http://irc.lc/freenode/math/) on IRC for advice on re-parameterization algorithms.
